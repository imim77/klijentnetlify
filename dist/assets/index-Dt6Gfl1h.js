(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ze=!1;var Bt=Array.isArray,Nn=Array.prototype.indexOf,Ee=Array.prototype.includes,Ve=Array.from,An=Object.defineProperty,De=Object.getOwnPropertyDescriptor,Mn=Object.getOwnPropertyDescriptors,Ln=Object.prototype,Wn=Array.prototype,qt=Object.getPrototypeOf,St=Object.isExtensible;const zn=()=>{};function Bn(t){return t()}function et(t){for(var e=0;e<t.length;e++)t[e]()}function Ut(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}const P=2,Ye=4,Le=8,Ht=1<<24,ne=16,X=32,be=64,tt=128,U=512,R=1024,x=2048,Q=4096,W=8192,le=16384,ye=32768,Te=65536,Et=1<<17,$t=1<<18,xe=1<<19,jt=1<<20,oe=1<<25,we=65536,nt=1<<21,ut=1<<22,ce=1<<23,Ne=Symbol("$state"),he=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Jt(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Un(t,e,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Hn(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $n(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Jn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Vn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Yn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Kn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Gn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Qn=1,Xn=2,Zn=16,er=2,k=Symbol(),tr="http://www.w3.org/1999/xhtml";function nr(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Vt(t){return t===this.v}function rr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Yt(t){return!rr(t,this.v)}let We=!1,sr=!1;function ir(){We=!0}let I=null;function Re(t){I=t}function Kt(t,e=!1,n){I={p:I,i:!1,c:null,e:null,s:t,x:null,l:We&&!e?{s:null,u:null,$:[]}:null}}function Gt(t){var e=I,n=e.e;if(n!==null){e.e=null;for(var r of n)_n(r)}return e.i=!0,I=e.p,{}}function ze(){return!We||I!==null&&I.l===null}let Se=[];function or(){var t=Se;Se=[],et(t)}function ve(t){if(Se.length===0){var e=Se;queueMicrotask(()=>{e===Se&&or()})}Se.push(t)}function Qt(t){var e=g;if(e===null)return _.f|=ce,t;if((e.f&ye)===0&&(e.f&Ye)===0)throw t;ae(t,e)}function ae(t,e){for(;e!==null;){if((e.f&tt)!==0){if((e.f&ye)===0)throw t;try{e.b.error(t);return}catch(n){t=n}}e=e.parent}throw t}const ar=-7169;function b(t,e){t.f=t.f&ar|e}function dt(t){(t.f&U)!==0||t.deps===null?b(t,R):b(t,Q)}function Xt(t){if(t!==null)for(const e of t)(e.f&P)===0||(e.f&we)===0||(e.f^=we,Xt(e.deps))}function Zt(t,e,n){(t.f&x)!==0?e.add(t):(t.f&Q)!==0&&n.add(t),Xt(t.deps),b(t,R)}const Ue=new Set;let w=null,Y=null,B=[],ht=null,rt=!1;class fe{current=new Map;previous=new Map;#t=new Set;#o=new Set;#e=0;#s=0;#n=null;#i=new Set;#r=new Set;#a=new Map;is_fork=!1;#l=!1;#f(){return this.is_fork||this.#s>0}skip_effect(e){this.#a.has(e)||this.#a.set(e,{d:[],m:[]})}unskip_effect(e){var n=this.#a.get(e);if(n){this.#a.delete(e);for(var r of n.d)b(r,x),K(r);for(r of n.m)b(r,Q),K(r)}}process(e){B=[],this.apply();var n=[],r=[];for(const s of e)this.#c(s,n,r);if(this.#f()){this.#u(r),this.#u(n);for(const[s,i]of this.#a)nn(s,i)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#h(),w=null,Tt(r),Tt(n),this.#n?.resolve()}Y=null}#c(e,n,r){e.f^=R;for(var s=e.first;s!==null;){var i=s.f,c=(i&(X|be))!==0,o=c&&(i&R)!==0,a=o||(i&W)!==0||this.#a.has(s);if(!a&&s.fn!==null){c?s.f^=R:(i&Ye)!==0?n.push(s):Be(s)&&((i&ne)!==0&&this.#r.add(s),Pe(s));var l=s.first;if(l!==null){s=l;continue}}for(;s!==null;){var d=s.next;if(d!==null){s=d;break}s=s.parent}}}#u(e){for(var n=0;n<e.length;n+=1)Zt(e[n],this.#i,this.#r)}capture(e,n){n!==k&&!this.previous.has(e)&&this.previous.set(e,n),(e.f&ce)===0&&(this.current.set(e,e.v),Y?.set(e,e.v))}activate(){w=this,this.apply()}deactivate(){w===this&&(w=null,Y=null)}flush(){if(this.activate(),B.length>0){if(lr(),w!==null&&w!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#o)e(this);this.#o.clear()}#h(){if(Ue.size>1){this.previous.clear();var e=Y,n=!0;for(const s of Ue){if(s===this){n=!1;continue}const i=[];for(const[o,a]of this.current){if(s.current.has(o))if(n&&a!==s.current.get(o))s.current.set(o,a);else continue;i.push(o)}if(i.length===0)continue;const c=[...s.current.keys()].filter(o=>!this.current.has(o));if(c.length>0){var r=B;B=[];const o=new Set,a=new Map;for(const l of i)en(l,c,o,a);if(B.length>0){w=s,s.apply();for(const l of B)s.#c(l,[],[]);s.deactivate()}B=r}}w=null,Y=e}Ue.delete(this)}increment(e){this.#e+=1,e&&(this.#s+=1)}decrement(e){this.#e-=1,e&&(this.#s-=1),!this.#l&&(this.#l=!0,ve(()=>{this.#l=!1,this.#f()?B.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#i)this.#r.delete(e),b(e,x),K(e);for(const e of this.#r)b(e,Q),K(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#o.add(e)}settled(){return(this.#n??=Ut()).promise}static ensure(){if(w===null){const e=w=new fe;Ue.add(w),ve(()=>{w===e&&e.flush()})}return w}apply(){}}function lr(){rt=!0;var t=null;try{for(var e=0;B.length>0;){var n=fe.ensure();if(e++>1e3){var r,s;cr()}n.process(B),ue.clear()}}finally{B=[],rt=!1,ht=null}}function cr(){try{Jn()}catch(t){ae(t,ht)}}let ee=null;function Tt(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(le|W))===0&&Be(r)&&(ee=new Set,Pe(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&mn(r),ee?.size>0)){ue.clear();for(const s of ee){if((s.f&(le|W))!==0)continue;const i=[s];let c=s.parent;for(;c!==null;)ee.has(c)&&(ee.delete(c),i.push(c)),c=c.parent;for(let o=i.length-1;o>=0;o--){const a=i[o];(a.f&(le|W))===0&&Pe(a)}}ee.clear()}}ee=null}}function en(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const s of t.reactions){const i=s.f;(i&P)!==0?en(s,e,n,r):(i&(ut|ne))!==0&&(i&x)===0&&tn(s,e,r)&&(b(s,x),K(s))}}function tn(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const s of t.deps){if(Ee.call(e,s))return!0;if((s.f&P)!==0&&tn(s,e,n))return n.set(s,!0),!0}return n.set(t,!1),!1}function K(t){var e=ht=t,n=e.b;if(n?.is_pending&&(t.f&(Ye|Le|Ht))!==0&&(t.f&ye)===0){n.defer_effect(t);return}for(;e.parent!==null;){e=e.parent;var r=e.f;if(rt&&e===g&&(r&ne)!==0&&(r&$t)===0&&(r&ye)!==0)return;if((r&(be|X))!==0){if((r&R)===0)return;e.f^=R}}B.push(e)}function nn(t,e){if(!((t.f&X)!==0&&(t.f&R)!==0)){(t.f&x)!==0?e.d.push(t):(t.f&Q)!==0&&e.m.push(t),b(t,R);for(var n=t.first;n!==null;)nn(n,e),n=n.next}}function fr(t){let e=0,n=Ce(0),r;return()=>{gt()&&(y(n),xr(()=>(e===0&&(r=Ge(()=>t(()=>Ae(n)))),e+=1,()=>{ve(()=>{e-=1,e===0&&(r?.(),r=void 0,Ae(n))})})))}}var ur=Te|xe;function dr(t,e,n,r){new hr(t,e,n,r)}class hr{parent;is_pending=!1;transform_error;#t;#o=null;#e;#s;#n;#i=null;#r=null;#a=null;#l=null;#f=0;#c=0;#u=!1;#h=new Set;#p=new Set;#d=null;#y=fr(()=>(this.#d=Ce(this.#f),()=>{this.#d=null}));constructor(e,n,r,s){this.#t=e,this.#e=n,this.#s=i=>{var c=g;c.b=this,c.f|=tt,r(i)},this.parent=g.b,this.transform_error=s??this.parent?.transform_error??(i=>i),this.#n=mt(()=>{this.#g()},ur)}#w(){try{this.#i=q(()=>this.#s(this.#t))}catch(e){this.error(e)}}#C(e){const n=this.#e.failed;n&&(this.#a=q(()=>{n(this.#t,()=>e,()=>()=>{})}))}#I(){const e=this.#e.pending;e&&(this.is_pending=!0,this.#r=q(()=>e(this.#t)),ve(()=>{var n=this.#l=document.createDocumentFragment(),r=_e();n.append(r),this.#i=this.#_(()=>(fe.ensure(),q(()=>this.#s(r)))),this.#c===0&&(this.#t.before(n),this.#l=null,ge(this.#r,()=>{this.#r=null}),this.#v())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#f=0,this.#i=q(()=>{this.#s(this.#t)}),this.#c>0){var e=this.#l=document.createDocumentFragment();Cn(this.#i,e);const n=this.#e.pending;this.#r=q(()=>n(this.#t))}else this.#v()}catch(n){this.error(n)}}#v(){this.is_pending=!1;for(const e of this.#h)b(e,x),K(e);for(const e of this.#p)b(e,Q),K(e);this.#h.clear(),this.#p.clear()}defer_effect(e){Zt(e,this.#h,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#_(e){var n=g,r=_,s=I;Z(this.#n),$(this.#n),Re(this.#n.ctx);try{return e()}catch(i){return Qt(i),null}finally{Z(n),$(r),Re(s)}}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#c+=e,this.#c===0&&(this.#v(),this.#r&&ge(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#m(e),this.#f+=e,!(!this.#d||this.#u)&&(this.#u=!0,ve(()=>{this.#u=!1,this.#d&&ke(this.#d,this.#f)}))}get_effect_pending(){return this.#y(),y(this.#d)}error(e){var n=this.#e.onerror;let r=this.#e.failed;if(!n&&!r)throw e;this.#i&&(A(this.#i),this.#i=null),this.#r&&(A(this.#r),this.#r=null),this.#a&&(A(this.#a),this.#a=null);var s=!1,i=!1;const c=()=>{if(s){nr();return}s=!0,i&&Gn(),this.#a!==null&&ge(this.#a,()=>{this.#a=null}),this.#_(()=>{fe.ensure(),this.#g()})},o=a=>{try{i=!0,n?.(a,c),i=!1}catch(l){ae(l,this.#n&&this.#n.parent)}r&&(this.#a=this.#_(()=>{fe.ensure();try{return q(()=>{var l=g;l.b=this,l.f|=tt,r(this.#t,()=>a,()=>c)})}catch(l){return ae(l,this.#n.parent),null}}))};ve(()=>{var a;try{a=this.transform_error(e)}catch(l){ae(l,this.#n&&this.#n.parent);return}a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(o,l=>ae(l,this.#n&&this.#n.parent)):o(a)})}}function pr(t,e,n,r){const s=ze()?pt:rn;var i=t.filter(u=>!u.settled);if(n.length===0&&i.length===0){r(e.map(s));return}var c=g,o=vr(),a=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(u=>u.promise)):null;function l(u){o();try{r(u)}catch(h){(c.f&le)===0&&ae(h,c)}st()}if(n.length===0){a.then(()=>l(e.map(s)));return}function d(){o(),Promise.all(n.map(u=>gr(u))).then(u=>l([...e.map(s),...u])).catch(u=>ae(u,c))}a?a.then(d):d()}function vr(){var t=g,e=_,n=I,r=w;return function(i=!0){Z(t),$(e),Re(n),i&&r?.activate()}}function st(t=!0){Z(null),$(null),Re(null),t&&w?.deactivate()}function _r(){var t=g.b,e=w,n=t.is_rendered();return t.update_pending_count(1),e.increment(n),()=>{t.update_pending_count(-1),e.decrement(n)}}function pt(t){var e=P|x,n=_!==null&&(_.f&P)!==0?_:null;return g!==null&&(g.f|=xe),{ctx:I,deps:null,effects:null,equals:Vt,f:e,fn:t,reactions:null,rv:0,v:k,wv:0,parent:n??g,ac:null}}function gr(t,e,n){g===null&&qn();var s=void 0,i=Ce(k),c=!_,o=new Map;return Pr(()=>{var a=Ut();s=a.promise;try{Promise.resolve(t()).then(a.resolve,a.reject).finally(st)}catch(h){a.reject(h),st()}var l=w;if(c){var d=_r();o.get(l)?.reject(he),o.delete(l),o.set(l,a)}const u=(h,p=void 0)=>{if(l.activate(),p)p!==he&&(i.f|=ce,ke(i,p));else{(i.f&ce)!==0&&(i.f^=ce),ke(i,h);for(const[f,v]of o){if(o.delete(f),f===l)break;v.reject(he)}}d&&d()};a.promise.then(u,h=>u(null,h||"unknown"))}),vn(()=>{for(const a of o.values())a.reject(he)}),new Promise(a=>{function l(d){function u(){d===s?a(i):l(s)}d.then(u,u)}l(s)})}function rn(t){const e=pt(t);return e.equals=Yt,e}function mr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)A(e[n])}}function yr(t){for(var e=t.parent;e!==null;){if((e.f&P)===0)return(e.f&le)===0?e:null;e=e.parent}return null}function vt(t){var e,n=g;Z(yr(t));try{t.f&=~we,mr(t),e=En(t)}finally{Z(n)}return e}function sn(t){var e=vt(t);if(!t.equals(e)&&(t.wv=bn(),(!w?.is_fork||t.deps===null)&&(t.v=e,t.deps===null))){b(t,R);return}Ie||(Y!==null?(gt()||w?.is_fork)&&Y.set(t,e):dt(t))}function wr(t){if(t.effects!==null)for(const e of t.effects)(e.teardown||e.ac)&&(e.teardown?.(),e.ac?.abort(he),e.teardown=zn,e.ac=null,Me(e,0),yt(e))}function on(t){if(t.effects!==null)for(const e of t.effects)e.teardown&&Pe(e)}let it=new Set;const ue=new Map;let an=!1;function Ce(t,e){var n={f:0,v:t,reactions:null,equals:Vt,rv:0,wv:0};return n}function F(t,e){const n=Ce(t);return Dr(n),n}function Cr(t,e=!1,n=!0){const r=Ce(t);return e||(r.equals=Yt),We&&n&&I!==null&&I.l!==null&&(I.l.s??=[]).push(r),r}function N(t,e,n=!1){_!==null&&(!G||(_.f&Et)!==0)&&ze()&&(_.f&(P|ne|ut|Et))!==0&&(H===null||!Ee.call(H,t))&&Kn();let r=n?te(e):e;return ke(t,r)}function ke(t,e){if(!t.equals(e)){var n=t.v;Ie?ue.set(t,e):ue.set(t,n),t.v=e;var r=fe.ensure();if(r.capture(t,n),(t.f&P)!==0){const s=t;(t.f&x)!==0&&vt(s),dt(s)}t.wv=bn(),ln(t,x),ze()&&g!==null&&(g.f&R)!==0&&(g.f&(X|be))===0&&(z===null?Nr([t]):z.push(t)),!r.is_fork&&it.size>0&&!an&&Ir()}return e}function Ir(){an=!1;for(const t of it)(t.f&R)!==0&&b(t,Q),Be(t)&&Pe(t);it.clear()}function Ae(t){N(t,t.v+1)}function ln(t,e){var n=t.reactions;if(n!==null)for(var r=ze(),s=n.length,i=0;i<s;i++){var c=n[i],o=c.f;if(!(!r&&c===g)){var a=(o&x)===0;if(a&&b(c,e),(o&P)!==0){var l=c;Y?.delete(l),(o&we)===0&&(o&U&&(c.f|=we),ln(l,Q))}else a&&((o&ne)!==0&&ee!==null&&ee.add(c),K(c))}}}function te(t){if(typeof t!="object"||t===null||Ne in t)return t;const e=qt(t);if(e!==Ln&&e!==Wn)return t;var n=new Map,r=Bt(t),s=F(0),i=me,c=o=>{if(me===i)return o();var a=_,l=me;$(null),xt(i);var d=o();return $(a),xt(l),d};return r&&n.set("length",F(t.length)),new Proxy(t,{defineProperty(o,a,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Vn();var d=n.get(a);return d===void 0?c(()=>{var u=F(l.value);return n.set(a,u),u}):N(d,l.value,!0),!0},deleteProperty(o,a){var l=n.get(a);if(l===void 0){if(a in o){const d=c(()=>F(k));n.set(a,d),Ae(s)}}else N(l,k),Ae(s);return!0},get(o,a,l){if(a===Ne)return t;var d=n.get(a),u=a in o;if(d===void 0&&(!u||De(o,a)?.writable)&&(d=c(()=>{var p=te(u?o[a]:k),f=F(p);return f}),n.set(a,d)),d!==void 0){var h=y(d);return h===k?void 0:h}return Reflect.get(o,a,l)},getOwnPropertyDescriptor(o,a){var l=Reflect.getOwnPropertyDescriptor(o,a);if(l&&"value"in l){var d=n.get(a);d&&(l.value=y(d))}else if(l===void 0){var u=n.get(a),h=u?.v;if(u!==void 0&&h!==k)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return l},has(o,a){if(a===Ne)return!0;var l=n.get(a),d=l!==void 0&&l.v!==k||Reflect.has(o,a);if(l!==void 0||g!==null&&(!d||De(o,a)?.writable)){l===void 0&&(l=c(()=>{var h=d?te(o[a]):k,p=F(h);return p}),n.set(a,l));var u=y(l);if(u===k)return!1}return d},set(o,a,l,d){var u=n.get(a),h=a in o;if(r&&a==="length")for(var p=l;p<u.v;p+=1){var f=n.get(p+"");f!==void 0?N(f,k):p in o&&(f=c(()=>F(k)),n.set(p+"",f))}if(u===void 0)(!h||De(o,a)?.writable)&&(u=c(()=>F(void 0)),N(u,te(l)),n.set(a,u));else{h=u.v!==k;var v=c(()=>te(l));N(u,v)}var m=Reflect.getOwnPropertyDescriptor(o,a);if(m?.set&&m.set.call(d,l),!h){if(r&&typeof a=="string"){var S=n.get("length"),C=Number(a);Number.isInteger(C)&&C>=S.v&&N(S,C+1)}Ae(s)}return!0},ownKeys(o){y(s);var a=Reflect.ownKeys(o).filter(u=>{var h=n.get(u);return h===void 0||h.v!==k});for(var[l,d]of n)d.v!==k&&!(l in o)&&a.push(l);return a},setPrototypeOf(){Yn()}})}var Rt,cn,fn,un;function br(){if(Rt===void 0){Rt=window,cn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;fn=De(e,"firstChild").get,un=De(e,"nextSibling").get,St(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),St(n)&&(n.__t=void 0)}}function _e(t=""){return document.createTextNode(t)}function dn(t){return fn.call(t)}function Ke(t){return un.call(t)}function V(t,e){return dn(t)}function se(t,e=1,n=!1){let r=t;for(;e--;)r=Ke(r);return r}function Sr(t){t.textContent=""}function hn(){return!1}function Er(t,e,n){return document.createElementNS(tr,t,void 0)}function _t(t){var e=_,n=g;$(null),Z(null);try{return t()}finally{$(e),Z(n)}}function pn(t){g===null&&(_===null&&jn(),$n()),Ie&&Hn()}function Tr(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function re(t,e,n){var r=g;r!==null&&(r.f&W)!==0&&(t|=W);var s={ctx:I,deps:null,nodes:null,f:t|x|U,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Pe(s)}catch(o){throw A(s),o}else e!==null&&K(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&xe)===0&&(i=i.first,(t&ne)!==0&&(t&Te)!==0&&i!==null&&(i.f|=Te)),i!==null&&(i.parent=r,r!==null&&Tr(i,r),_!==null&&(_.f&P)!==0&&(t&be)===0)){var c=_;(c.effects??=[]).push(i)}return s}function gt(){return _!==null&&!G}function vn(t){const e=re(Le,null,!1);return b(e,R),e.teardown=t,e}function ot(t){pn();var e=g.f,n=!_&&(e&X)!==0&&(e&ye)===0;if(n){var r=I;(r.e??=[]).push(t)}else return _n(t)}function _n(t){return re(Ye|jt,t,!1)}function Rr(t){return pn(),re(Le|jt,t,!0)}function kr(t){fe.ensure();const e=re(be|xe,t,!0);return(n={})=>new Promise(r=>{n.outro?ge(e,()=>{A(e),r(void 0)}):(A(e),r(void 0))})}function Pr(t){return re(ut|xe,t,!0)}function xr(t,e=0){return re(Le|e,t,!0)}function kt(t,e=[],n=[],r=[]){pr(r,e,n,s=>{re(Le,()=>t(...s.map(y)),!0)})}function mt(t,e=0){var n=re(ne|e,t,!0);return n}function q(t){return re(X|xe,t,!0)}function gn(t){var e=t.teardown;if(e!==null){const n=Ie,r=_;Pt(!0),$(null);try{e.call(null)}finally{Pt(n),$(r)}}}function yt(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&_t(()=>{s.abort(he)});var r=n.next;(n.f&be)!==0?n.parent=null:A(n,e),n=r}}function Or(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&X)===0&&A(e),e=n}}function A(t,e=!0){var n=!1;(e||(t.f&$t)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Fr(t.nodes.start,t.nodes.end),n=!0),yt(t,e&&!n),Me(t,0),b(t,le);var r=t.nodes&&t.nodes.t;if(r!==null)for(const i of r)i.stop();gn(t);var s=t.parent;s!==null&&s.first!==null&&mn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Fr(t,e){for(;t!==null;){var n=t===e?null:Ke(t);t.remove(),t=n}}function mn(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function ge(t,e,n=!0){var r=[];yn(t,r,!0);var s=()=>{n&&A(t),e&&e()},i=r.length;if(i>0){var c=()=>--i||s();for(var o of r)o.out(c)}else s()}function yn(t,e,n){if((t.f&W)===0){t.f^=W;var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&e.push(o);for(var s=t.first;s!==null;){var i=s.next,c=(s.f&Te)!==0||(s.f&X)!==0&&(t.f&ne)!==0;yn(s,e,c?n:!1),s=i}}}function wt(t){wn(t,!0)}function wn(t,e){if((t.f&W)!==0){t.f^=W,(t.f&R)===0&&(b(t,x),K(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&Te)!==0||(n.f&X)!==0;wn(n,s?e:!1),n=r}var i=t.nodes&&t.nodes.t;if(i!==null)for(const c of i)(c.is_global||e)&&c.in()}}function Cn(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var s=n===r?null:Ke(n);e.append(n),n=s}}let Je=!1,Ie=!1;function Pt(t){Ie=t}let _=null,G=!1;function $(t){_=t}let g=null;function Z(t){g=t}let H=null;function Dr(t){_!==null&&(H===null?H=[t]:H.push(t))}let D=null,L=0,z=null;function Nr(t){z=t}let In=1,pe=0,me=pe;function xt(t){me=t}function bn(){return++In}function Be(t){var e=t.f;if((e&x)!==0)return!0;if(e&P&&(t.f&=~we),(e&Q)!==0){for(var n=t.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(Be(i)&&sn(i),i.wv>t.wv)return!0}(e&U)!==0&&Y===null&&b(t,R)}return!1}function Sn(t,e,n=!0){var r=t.reactions;if(r!==null&&!(H!==null&&Ee.call(H,t)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&P)!==0?Sn(i,e,!1):e===i&&(n?b(i,x):(i.f&R)!==0&&b(i,Q),K(i))}}function En(t){var e=D,n=L,r=z,s=_,i=H,c=I,o=G,a=me,l=t.f;D=null,L=0,z=null,_=(l&(X|be))===0?t:null,H=null,Re(t.ctx),G=!1,me=++pe,t.ac!==null&&(_t(()=>{t.ac.abort(he)}),t.ac=null);try{t.f|=nt;var d=t.fn,u=d();t.f|=ye;var h=t.deps,p=w?.is_fork;if(D!==null){var f;if(p||Me(t,L),h!==null&&L>0)for(h.length=L+D.length,f=0;f<D.length;f++)h[L+f]=D[f];else t.deps=h=D;if(gt()&&(t.f&U)!==0)for(f=L;f<h.length;f++)(h[f].reactions??=[]).push(t)}else!p&&h!==null&&L<h.length&&(Me(t,L),h.length=L);if(ze()&&z!==null&&!G&&h!==null&&(t.f&(P|Q|x))===0)for(f=0;f<z.length;f++)Sn(z[f],t);if(s!==null&&s!==t){if(pe++,s.deps!==null)for(let v=0;v<n;v+=1)s.deps[v].rv=pe;if(e!==null)for(const v of e)v.rv=pe;z!==null&&(r===null?r=z:r.push(...z))}return(t.f&ce)!==0&&(t.f^=ce),u}catch(v){return Qt(v)}finally{t.f^=nt,D=e,L=n,z=r,_=s,H=i,Re(c),G=o,me=a}}function Ar(t,e){let n=e.reactions;if(n!==null){var r=Nn.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(e.f&P)!==0&&(D===null||!Ee.call(D,e))){var i=e;(i.f&U)!==0&&(i.f^=U,i.f&=~we),dt(i),wr(i),Me(i,0)}}function Me(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Ar(t,n[r])}function Pe(t){var e=t.f;if((e&le)===0){b(t,R);var n=g,r=Je;g=t,Je=!0;try{(e&(ne|Ht))!==0?Or(t):yt(t),gn(t);var s=En(t);t.teardown=typeof s=="function"?s:null,t.wv=In;var i;Ze&&sr&&(t.f&x)!==0&&t.deps}finally{Je=r,g=n}}}function y(t){var e=t.f,n=(e&P)!==0;if(_!==null&&!G){var r=g!==null&&(g.f&le)!==0;if(!r&&(H===null||!Ee.call(H,t))){var s=_.deps;if((_.f&nt)!==0)t.rv<pe&&(t.rv=pe,D===null&&s!==null&&s[L]===t?L++:D===null?D=[t]:D.push(t));else{(_.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[_]:Ee.call(i,_)||i.push(_)}}}if(Ie&&ue.has(t))return ue.get(t);if(n){var c=t;if(Ie){var o=c.v;return((c.f&R)===0&&c.reactions!==null||Rn(c))&&(o=vt(c)),ue.set(c,o),o}var a=(c.f&U)===0&&!G&&_!==null&&(Je||(_.f&U)!==0),l=(c.f&ye)===0;Be(c)&&(a&&(c.f|=U),sn(c)),a&&!l&&(on(c),Tn(c))}if(Y?.has(t))return Y.get(t);if((t.f&ce)!==0)throw t.v;return t.v}function Tn(t){if(t.f|=U,t.deps!==null)for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&P)!==0&&(e.f&U)===0&&(on(e),Tn(e))}function Rn(t){if(t.v===k)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ue.has(e)||(e.f&P)!==0&&Rn(e))return!0;return!1}function Ge(t){var e=G;try{return G=!0,t()}finally{G=e}}function Mr(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ne in t)at(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Ne in n&&at(n)}}}function at(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{at(t[r],e)}catch{}const n=qt(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Mn(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}const Lr=["touchstart","touchmove"];function Wr(t){return Lr.includes(t)}const He=Symbol("events"),zr=new Set,Ot=new Set;function Br(t,e,n,r={}){function s(i){if(r.capture||lt.call(e,i),!i.cancelBubble)return _t(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ve(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function qr(t,e,n,r,s){var i={capture:r,passive:s},c=Br(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&vn(()=>{e.removeEventListener(t,c,i)})}let Ft=null;function lt(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;Ft=t;var c=0,o=Ft===t&&t[He];if(o){var a=s.indexOf(o);if(a!==-1&&(e===document||e===window)){t[He]=e;return}var l=s.indexOf(e);if(l===-1)return;a<=l&&(c=a)}if(i=s[c]||t.target,i!==e){An(t,"currentTarget",{configurable:!0,get(){return i||n}});var d=_,u=g;$(null),Z(null);try{for(var h,p=[];i!==null;){var f=i.assignedSlot||i.parentNode||i.host||null;try{var v=i[He]?.[r];v!=null&&(!i.disabled||t.target===i)&&v.call(i,t)}catch(m){h?p.push(m):h=m}if(t.cancelBubble||f===e||f===null)break;i=f}if(h){for(let m of p)queueMicrotask(()=>{throw m});throw h}}finally{t[He]=e,delete t.currentTarget,$(d),Z(u)}}}const Ur=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:t=>t});function Hr(t){return Ur?.createHTML(t)??t}function $r(t){var e=Er("template");return e.innerHTML=Hr(t.replaceAll("<!>","<!---->")),e.content}function jr(t,e){var n=g;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function Qe(t,e){var n=(e&er)!==0,r,s=!t.startsWith("<!>");return()=>{r===void 0&&(r=$r(s?t:"<!>"+t),r=dn(r));var i=n||cn?document.importNode(r,!0):r.cloneNode(!0);return jr(i,i),i}}function $e(t,e){t!==null&&t.before(e)}function de(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Jr(t,e){return Vr(t,e)}const je=new Map;function Vr(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:c=!0,transformError:o}){br();var a=void 0,l=kr(()=>{var d=n??e.appendChild(_e());dr(d,{pending:()=>{}},p=>{Kt({});var f=I;i&&(f.c=i),s&&(r.$$events=s),a=t(p,r)||{},Gt()},o);var u=new Set,h=p=>{for(var f=0;f<p.length;f++){var v=p[f];if(!u.has(v)){u.add(v);var m=Wr(v);for(const j of[e,document]){var S=je.get(j);S===void 0&&(S=new Map,je.set(j,S));var C=S.get(v);C===void 0?(j.addEventListener(v,lt,{passive:m}),S.set(v,1)):S.set(v,C+1)}}}};return h(Ve(zr)),Ot.add(h),()=>{for(var p of u)for(const m of[e,document]){var f=je.get(m),v=f.get(p);--v==0?(m.removeEventListener(p,lt),f.delete(p),f.size===0&&je.delete(m)):f.set(p,v)}Ot.delete(h),d!==n&&d.parentNode?.removeChild(d)}});return Yr.set(a,l),a}let Yr=new WeakMap;class Kr{anchor;#t=new Map;#o=new Map;#e=new Map;#s=new Set;#n=!0;constructor(e,n=!0){this.anchor=e,this.#n=n}#i=()=>{var e=w;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#o.get(n);if(r)wt(r),this.#s.delete(n);else{var s=this.#e.get(n);s&&(this.#o.set(n,s.effect),this.#e.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,c]of this.#t){if(this.#t.delete(i),i===e)break;const o=this.#e.get(c);o&&(A(o.effect),this.#e.delete(c))}for(const[i,c]of this.#o){if(i===n||this.#s.has(i))continue;const o=()=>{if(Array.from(this.#t.values()).includes(i)){var l=document.createDocumentFragment();Cn(c,l),l.append(_e()),this.#e.set(i,{effect:c,fragment:l})}else A(c);this.#s.delete(i),this.#o.delete(i)};this.#n||!r?(this.#s.add(i),ge(c,o,!1)):o()}}};#r=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,s]of this.#e)n.includes(r)||(A(s.effect),this.#e.delete(r))};ensure(e,n){var r=w,s=hn();if(n&&!this.#o.has(e)&&!this.#e.has(e))if(s){var i=document.createDocumentFragment(),c=_e();i.append(c),this.#e.set(e,{effect:q(()=>n(c)),fragment:i})}else this.#o.set(e,q(()=>n(this.anchor)));if(this.#t.set(r,e),s){for(const[o,a]of this.#o)o===e?r.unskip_effect(a):r.skip_effect(a);for(const[o,a]of this.#e)o===e?r.unskip_effect(a.effect):r.skip_effect(a.effect);r.oncommit(this.#i),r.ondiscard(this.#r)}else this.#i()}}function Gr(t,e,n=!1){var r=new Kr(t),s=n?Te:0;function i(c,o){r.ensure(c,o)}mt(()=>{var c=!1;e((o,a=0)=>{c=!0,i(a,o)}),c||i(!1,null)},s)}function Qr(t,e){return e}function Xr(t,e,n){for(var r=[],s=e.length,i,c=e.length,o=0;o<s;o++){let u=e[o];ge(u,()=>{if(i){if(i.pending.delete(u),i.done.add(u),i.pending.size===0){var h=t.outrogroups;ct(Ve(i.done)),h.delete(i),h.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var a=r.length===0&&n!==null;if(a){var l=n,d=l.parentNode;Sr(d),d.append(l),t.items.clear()}ct(e,!a)}else i={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(i)}function ct(t,e=!0){for(var n=0;n<t.length;n++)A(t[n],e)}var Dt;function Zr(t,e,n,r,s,i=null){var c=t,o=new Map;{var a=t;c=a.appendChild(_e())}var l=null,d=rn(()=>{var m=n();return Bt(m)?m:m==null?[]:Ve(m)}),u,h=!0;function p(){v.fallback=l,es(v,u,c,e,r),l!==null&&(u.length===0?(l.f&oe)===0?wt(l):(l.f^=oe,Fe(l,null,c)):ge(l,()=>{l=null}))}var f=mt(()=>{u=y(d);for(var m=u.length,S=new Set,C=w,j=hn(),E=0;E<m;E+=1){var O=u[E],M=r(O,E),T=h?null:o.get(M);T?(T.v&&ke(T.v,O),T.i&&ke(T.i,E),j&&C.unskip_effect(T.e)):(T=ts(o,h?c:Dt??=_e(),O,M,E,s,e,n),h||(T.e.f|=oe),o.set(M,T)),S.add(M)}if(m===0&&i&&!l&&(h?l=q(()=>i(c)):(l=q(()=>i(Dt??=_e())),l.f|=oe)),m>S.size&&Un(),!h)if(j){for(const[J,qe]of o)S.has(J)||C.skip_effect(qe.e);C.oncommit(p),C.ondiscard(()=>{})}else p();y(d)}),v={effect:f,items:o,outrogroups:null,fallback:l};h=!1}function Oe(t){for(;t!==null&&(t.f&X)===0;)t=t.next;return t}function es(t,e,n,r,s){var i=e.length,c=t.items,o=Oe(t.effect.first),a,l=null,d=[],u=[],h,p,f,v;for(v=0;v<i;v+=1){if(h=e[v],p=s(h,v),f=c.get(p).e,t.outrogroups!==null)for(const J of t.outrogroups)J.pending.delete(f),J.done.delete(f);if((f.f&oe)!==0)if(f.f^=oe,f===o)Fe(f,null,n);else{var m=l?l.next:o;f===t.effect.last&&(t.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),ie(t,l,f),ie(t,f,m),Fe(f,m,n),l=f,d=[],u=[],o=Oe(l.next);continue}if((f.f&W)!==0&&wt(f),f!==o){if(a!==void 0&&a.has(f)){if(d.length<u.length){var S=u[0],C;l=S.prev;var j=d[0],E=d[d.length-1];for(C=0;C<d.length;C+=1)Fe(d[C],S,n);for(C=0;C<u.length;C+=1)a.delete(u[C]);ie(t,j.prev,E.next),ie(t,l,j),ie(t,E,S),o=S,l=E,v-=1,d=[],u=[]}else a.delete(f),Fe(f,o,n),ie(t,f.prev,f.next),ie(t,f,l===null?t.effect.first:l.next),ie(t,l,f),l=f;continue}for(d=[],u=[];o!==null&&o!==f;)(a??=new Set).add(o),u.push(o),o=Oe(o.next);if(o===null)continue}(f.f&oe)===0&&d.push(f),l=f,o=Oe(f.next)}if(t.outrogroups!==null){for(const J of t.outrogroups)J.pending.size===0&&(ct(Ve(J.done)),t.outrogroups?.delete(J));t.outrogroups.size===0&&(t.outrogroups=null)}if(o!==null||a!==void 0){var O=[];if(a!==void 0)for(f of a)(f.f&W)===0&&O.push(f);for(;o!==null;)(o.f&W)===0&&o!==t.fallback&&O.push(o),o=Oe(o.next);var M=O.length;if(M>0){var T=i===0?n:null;Xr(t,O,T)}}}function ts(t,e,n,r,s,i,c,o){var a=(c&Qn)!==0?(c&Zn)===0?Cr(n,!1,!1):Ce(n):null,l=(c&Xn)!==0?Ce(s):null;return{v:a,i:l,e:q(()=>(i(e,a??n,l??s,o),()=>{t.delete(r)}))}}function Fe(t,e,n){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end,i=e&&(e.f&oe)===0?e.nodes.start:n;r!==null;){var c=Ke(r);if(i.before(r),r===s)return;r=c}}function ie(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}function ns(t=!1){const e=I,n=e.l.u;if(!n)return;let r=()=>Mr(e.s);if(t){let s=0,i={};const c=pt(()=>{let o=!1;const a=e.s;for(const l in a)a[l]!==i[l]&&(i[l]=a[l],o=!0);return o&&s++,s});r=()=>y(c)}n.b.length&&Rr(()=>{Nt(e,r),et(n.b)}),ot(()=>{const s=Ge(()=>n.m.map(Bn));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&ot(()=>{Nt(e,r),et(n.a)})}function Nt(t,e){if(t.l.s)for(const n of t.l.s)y(n);e()}function rs(t){I===null&&Jt(),We&&I.l!==null?is(I).m.push(t):ot(()=>{const e=Ge(t);if(typeof e=="function")return e})}function ss(t){I===null&&Jt(),rs(()=>()=>Ge(t))}function is(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const os="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(os);ir();class as{socket=null;info;url=this._endpoint;_iceServers=[];_iceMode="server";_reconnectTimer=null;_isDestroyed=!1;_onOpen;_onMessage;_onClose;_onError;constructor(e){this.info=e.info??null,this._iceMode=cs(e.iceMode),this.url=Mt(e.endpoint),this._onOpen=e.onOpen,this._onMessage=e.onMessage,this._onClose=e.onClose,this._onError=e.onError,this._connect()}send(e){return this._isConnected()?(this.socket.send(JSON.stringify(e)),!0):!1}getIceServers(){return this._iceMode==="none"?[]:this._iceMode==="stun"?[At()]:this._iceServers.length>0?this._iceServers:[At()]}getIceMode(){return this._iceMode}destroy(){this._isDestroyed=!0,this._clearReconnectTimer(),this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.close(),this.socket=null)}_connect(){if(this._isDestroyed||this._isConnected()||this._isConnecting())return;this._clearReconnectTimer();const e=new WebSocket(this.url);e.onopen=()=>{this.info&&this.send({type:"UPDATE",info:this.info}),this._onOpen?.()},e.onmessage=n=>{let r;try{r=JSON.parse(n.data)}catch(s){this._onError?.(s);return}r.type==="HELLO"&&r.iceServers&&(this._iceServers=r.iceServers),this._onMessage?.(r)},e.onerror=n=>{this._onError?.(n)},e.onclose=n=>{this._handleClose(n)},this.socket=e}_handleClose(e){this.socket=null,this._onClose?.(e),!this._isDestroyed&&(this._clearReconnectTimer(),this._reconnectTimer=setTimeout(()=>this._connect(),5e3))}get _endpoint(){return Mt(void 0)}_isConnected(){return this.socket!==null&&this.socket.readyState===WebSocket.OPEN}_isConnecting(){return this.socket!==null&&this.socket.readyState===WebSocket.CONNECTING}_clearReconnectTimer(){this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=null)}}function At(){return{urls:["stun:stun.l.google.com:19302"]}}function Mt(t){const n=(t??void 0??"").trim();if(n){const s=ls(n);if(s)return s;console.warn("[Signaling] invalid VITE_SIGNALING_URL, falling back to local endpoint",n)}return`${location.protocol.startsWith("https")?"wss":"ws"}://${location.hostname}:9000/ws`}function ls(t){if(t.startsWith("ws://")||t.startsWith("wss://"))return t;if(t.startsWith("http://")||t.startsWith("https://"))try{const e=new URL(t);return e.protocol=e.protocol==="https:"?"wss:":"ws:",(!e.pathname||e.pathname==="/")&&(e.pathname="/ws"),e.toString()}catch{return null}if(!t.includes("://")){const e=`ws://${t}`;try{const n=new URL(e);return(!n.pathname||n.pathname==="/")&&(n.pathname="/ws"),n.toString()}catch{return null}}return null}function cs(t){if(t)return t;const e="".toLowerCase();return e==="none"||e==="stun"||e==="server"?e:"server"}const fs=64e3,us=1e6;class ds{chunkSize;maxPartitionSize;offset=0;partitionSize=0;inProgress=!1;file;onChunk;onPartitionEnd;constructor(e,n,r,s){this.file=e,this.onChunk=n,this.onPartitionEnd=r,this.chunkSize=s?.chunkSize??fs,this.maxPartitionSize=s?.maxPartitionSize??us}get progress(){return this.file.size===0?1:this.offset/this.file.size}get isFileEnd(){return this.offset>=this.file.size}get bytesProcessed(){return this.offset}async nextPartition(){if(this.inProgress)throw new Error("Partition read already in progress");if(this.isFileEnd)return{offset:this.offset,fileEnd:!0};this.inProgress=!0,this.partitionSize=0;try{for(;!this.isFileEnd&&!this.isPartitionEnd();){const e=await this.readChunk();if(e.byteLength===0)break;this.offset+=e.byteLength,this.partitionSize+=e.byteLength,this.onChunk(e)}return!this.isFileEnd&&this.isPartitionEnd()&&this.onPartitionEnd(this.offset),{offset:this.offset,fileEnd:this.isFileEnd}}finally{this.inProgress=!1}}async repeatPartition(){if(this.inProgress)throw new Error("Cannot repeat while partition read is in progress");return this.offset=Math.max(0,this.offset-this.partitionSize),this.nextPartition()}isPartitionEnd(){return this.partitionSize>=this.maxPartitionSize}async readChunk(){return await this.file.slice(this.offset,this.offset+this.chunkSize).arrayBuffer()}}class hs{constructor(e){if(this.meta=e,e.size<0)throw new Error("meta.size must be >= 0");this.mime=e.mime&&e.mime.length>0?e.mime:"application/octet-stream",this.done=new Promise((n,r)=>{this.resolveDone=n,this.rejectDone=r}),this.meta.size===0&&this.complete()}buffer=[];bytesReceivedInternal=0;settled=!1;mime;resolveDone;rejectDone;done;get bytesReceived(){return this.bytesReceivedInternal}get totalBytes(){return this.meta.size}get fileName(){return this.meta.name}get progress(){return this.meta.size===0?1:this.bytesReceivedInternal/this.meta.size}unchunk(e){if(this.settled)return;const n="byteLength"in e?e.byteLength:e.size;if(n===0)return;const r=this.meta.size-this.bytesReceivedInternal;if(r<=0){this.complete();return}if(n>r){this.abort(new Error("Received chunk larger than expected remaining bytes"));return}const s=e instanceof Blob?e:new Blob([e]);this.buffer.push(s),this.bytesReceivedInternal+=n,this.bytesReceivedInternal===this.meta.size&&this.complete()}abort(e){this.settled||(this.settled=!0,this.rejectDone(e??new Error("File digest aborted")))}complete(){if(this.settled)return;this.settled=!0;const e=new Blob(this.buffer,{type:this.mime}),n={name:this.meta.name,mime:this.mime,size:this.meta.size,blob:e};this.resolveDone(n)}}class ps{pc=null;dc=null;signaling;peerId;sessionId;isConnected=!1;isCaller=!1;iceServers=[];onConnectionStateChange;onIceStateChange;forceLoopbackHostCandidates=!1;pendingCandidates=[];pendingEndOfCandidates=!1;lastConnectionState=null;iceRestartAttempts=0;maxIceRestartAttempts=1;localCandidateCounts={};remoteCandidateCounts={};fileTransfer;constructor({signaling:e,peerId:n,sessionId:r,onConnectionStateChange:s,onIceStateChange:i,forceLoopbackHostCandidates:c}){this.signaling=e,this.peerId=n,this.sessionId=r,this.onConnectionStateChange=s,this.onIceStateChange=i,this.forceLoopbackHostCandidates=c??!1,this.fileTransfer=new vs({peerId:n,sendRaw:o=>this.sendData(o),onFileReceived:o=>this.handleReceivedFile(o),onProgress:o=>{console.log("[WebRTC] transfer progress",{peerId:this.peerId,sessionId:this.sessionId,progress:o})},onTransferCompleted:()=>{console.log("[WebRTC] transfer completed",{peerId:this.peerId,sessionId:this.sessionId})}})}sendFiles(e){this.fileTransfer.sendFiles(e)}createPeerConnection(){if(this.pc)return;const e={iceServers:this.iceServers.map(n=>({urls:n.urls,username:n.username,credential:n.credential}))};this.pc=new RTCPeerConnection(e),console.log("[WebRTC] create peer connection",{sessionId:this.sessionId,peerId:this.peerId,isCaller:this.isCaller,iceServers:this.iceServers}),this.pc.onicecandidate=n=>{if(!n.candidate){console.log("[WebRTC] local ICE gathering complete",{sessionId:this.sessionId,peerId:this.peerId}),this.signaling.send({type:"CANDIDATE",sessionId:this.sessionId,target:this.peerId,candidate:null});return}const r=n.candidate.type||ft(n.candidate.candidate);this.bumpCandidate(this.localCandidateCounts,r);const s=this.forceLoopbackHostCandidates?Lt(n.candidate.toJSON()):n.candidate.toJSON();console.log("[WebRTC] local ICE candidate",{sessionId:this.sessionId,peerId:this.peerId,type:r,forcedLoopback:this.forceLoopbackHostCandidates}),this.signaling.send({type:"CANDIDATE",sessionId:this.sessionId,target:this.peerId,candidate:s})},this.pc.onicecandidateerror=n=>{console.warn("[WebRTC] local ICE candidate error",{sessionId:this.sessionId,peerId:this.peerId,address:n.address,port:n.port,errorCode:n.errorCode,errorText:n.errorText,url:n.url})},this.pc.onconnectionstatechange=()=>{const n=this.pc?.connectionState;if(console.log("[WebRTC] connection state:",n,{sessionId:this.sessionId,peerId:this.peerId}),!(!n||n===this.lastConnectionState)){if(this.lastConnectionState=n,this.onConnectionStateChange?.(n),n==="connected"){this.isConnected=!0,console.log("[WebRTC] peer connected",{sessionId:this.sessionId,peerId:this.peerId,role:this.isCaller?"caller":"callee"}),this.logSelectedCandidatePair();return}(n==="disconnected"||n==="failed"||n==="closed")&&(this.isConnected=!1,console.warn("[WebRTC] peer not connected",{state:n,sessionId:this.sessionId,peerId:this.peerId,role:this.isCaller?"caller":"callee"}))}},this.pc.oniceconnectionstatechange=()=>{const n=this.pc?.iceConnectionState;console.log("[WebRTC] ICE connection state:",n,{sessionId:this.sessionId,peerId:this.peerId,localCandidates:this.localCandidateCounts,remoteCandidates:this.remoteCandidateCounts}),n&&(this.onIceStateChange?.(n,this.getIceSnapshot()),(n==="connected"||n==="completed")&&(this.iceRestartAttempts=0),n==="failed"&&(console.warn("[WebRTC] ICE failed snapshot",{sessionId:this.sessionId,peerId:this.peerId,localCandidates:this.localCandidateCounts,remoteCandidates:this.remoteCandidateCounts}),this.tryIceRestart()))},this.pc.ondatachannel=n=>{this.setupDataChannel(n.channel)},this.isCaller&&(this.createDataChannel(),this.createOffer())}setupDataChannel(e){this.dc=e,e.binaryType="arraybuffer",e.onopen=()=>{console.log("Data channel opened")},e.onmessage=n=>{this.fileTransfer.handleIncomingMessage(n.data)},e.onclose=()=>{console.log("Data channel closed")},e.onerror=n=>{console.error("Data channel error:",n)}}createDataChannel(){if(!this.pc||this.dc)return;const e=this.pc.createDataChannel("data",{ordered:!0});this.setupDataChannel(e)}async HandlerOffer(e){if(this.pc||this.createPeerConnection(),!!this.pc)try{console.log("[WebRTC] received offer",{sessionId:this.sessionId,peerId:this.peerId}),await this.pc.setRemoteDescription(e),await this.flushPendingCandidates();const n=await this.pc.createAnswer();await this.pc.setLocalDescription(n),console.log("[WebRTC] sending answer",{sessionId:this.sessionId,peerId:this.peerId}),this.signaling.send({type:"ANSWER",sessionId:this.sessionId,target:this.peerId,sdp:n.sdp??""})}catch(n){console.error("Failed to handle offer:",n)}}async HandleAnswer(e){if(this.pc)try{console.log("[WebRTC] received answer",{sessionId:this.sessionId,peerId:this.peerId}),await this.pc.setRemoteDescription(e),await this.flushPendingCandidates()}catch(n){console.error("Failed to handle answer:",n)}}async HandleCandidate(e){if(this.pc)try{if(e===null){if(!this.pc.remoteDescription){this.pendingEndOfCandidates=!0;return}await this.pc.addIceCandidate(null),console.log("[WebRTC] received end-of-candidates",{sessionId:this.sessionId,peerId:this.peerId});return}const n=e instanceof RTCIceCandidate?e.toJSON():e,r=this.forceLoopbackHostCandidates?Lt(n):n;if(!r?.candidate)return;if(this.bumpCandidate(this.remoteCandidateCounts,ft(r.candidate)),!this.pc.remoteDescription){console.log("[WebRTC] queue remote ICE candidate until remote description",{sessionId:this.sessionId,peerId:this.peerId}),this.pendingCandidates.push(r);return}console.log("[WebRTC] add remote ICE candidate",{sessionId:this.sessionId,peerId:this.peerId}),await this.pc.addIceCandidate(new RTCIceCandidate(r))}catch(n){console.error("Failed to add ICE candidate",n)}}destroy(){this.fileTransfer.destroy(),this.dc&&(this.dc.onopen=null,this.dc.onmessage=null,this.dc.onclose=null,this.dc.onerror=null,this.dc.close(),this.dc=null),this.pc&&(this.pc.onicecandidate=null,this.pc.onicecandidateerror=null,this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.ondatachannel=null,this.pc.close(),this.pc=null),this.isConnected=!1,this.lastConnectionState=null,this.pendingCandidates=[],this.pendingEndOfCandidates=!1,this.iceRestartAttempts=0,this.onConnectionStateChange?.("closed"),this.onIceStateChange?.("closed",this.getIceSnapshot())}bumpCandidate(e,n){const r=n||"unknown";e[r]=(e[r]??0)+1}getIceSnapshot(){return{localCandidates:{...this.localCandidateCounts},remoteCandidates:{...this.remoteCandidateCounts}}}async createOffer(e){if(this.pc)try{const n=await this.pc.createOffer(e);await this.pc.setLocalDescription(n),console.log("[WebRTC] sending offer",{sessionId:this.sessionId,peerId:this.peerId,iceRestart:e?.iceRestart===!0}),this.signaling.send({type:"OFFER",sessionId:this.sessionId,target:this.peerId,sdp:n.sdp??""})}catch(n){console.error("Failed to create offer:",n)}}sendData(e){if(!this.dc||this.dc.readyState!=="open")throw new Error("data channel is not open");if(typeof e=="string"){this.dc.send(e);return}this.dc.send(new Uint8Array(e))}async flushPendingCandidates(){if(!this.pc||!this.pc.remoteDescription)return;const e=this.pendingCandidates;this.pendingCandidates=[];for(const n of e)try{console.log("[WebRTC] flush queued ICE candidate",{sessionId:this.sessionId,peerId:this.peerId}),await this.pc.addIceCandidate(new RTCIceCandidate(n))}catch(r){console.error("Failed to flush ICE candidate",r)}if(this.pendingEndOfCandidates){this.pendingEndOfCandidates=!1;try{await this.pc.addIceCandidate(null),console.log("[WebRTC] flush queued end-of-candidates",{sessionId:this.sessionId,peerId:this.peerId})}catch(n){console.error("Failed to flush end-of-candidates",n)}}}async tryIceRestart(){if(!(!this.pc||!this.isCaller)&&!(this.iceRestartAttempts>=this.maxIceRestartAttempts)){if(this.pc.signalingState!=="stable"){console.warn("[WebRTC] skip ICE restart while signaling not stable",{sessionId:this.sessionId,peerId:this.peerId,signalingState:this.pc.signalingState});return}this.iceRestartAttempts+=1,this.pc.restartIce(),console.warn("[WebRTC] attempting ICE restart",{sessionId:this.sessionId,peerId:this.peerId,attempt:this.iceRestartAttempts}),await this.createOffer({iceRestart:!0})}}async logSelectedCandidatePair(){if(this.pc)try{const e=await this.pc.getStats(),n=[];e.forEach(r=>{r.type==="transport"&&n.push(r)});for(const r of n){const s=r.selectedCandidatePairId;if(!s)continue;const i=e.get(s);if(!i||i.type!=="candidate-pair")continue;const c=e.get(i.localCandidateId),o=e.get(i.remoteCandidateId),a=c,l=o;console.log("[WebRTC] selected ICE candidate pair",{sessionId:this.sessionId,peerId:this.peerId,local:c?`${a.protocol??"unknown"}:${a.address??"unknown"}:${a.port??"unknown"}`:"unknown",remote:o?`${l.protocol??"unknown"}:${l.address??"unknown"}:${l.port??"unknown"}`:"unknown",currentRoundTripTime:i.currentRoundTripTime});return}console.log("[WebRTC] selected ICE candidate pair unavailable",{sessionId:this.sessionId,peerId:this.peerId})}catch(e){console.warn("[WebRTC] failed to read ICE candidate pair stats",{sessionId:this.sessionId,peerId:this.peerId,error:e})}}handleReceivedFile(e){console.log("[WebRTC] file received",{peerId:this.peerId,sessionId:this.sessionId,name:e.name,size:e.size,mime:e.mime});const n=URL.createObjectURL(e.blob),r=document.createElement("a");r.href=n,r.download=e.name,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(n),1e3)}}function ft(t){if(!t)return"unknown";const e=t.split(" "),n=e.indexOf("typ");return n===-1||n+1>=e.length?"unknown":e[n+1]||"unknown"}function Lt(t){if(!t.candidate)return t;const e=t.candidate.split(" ");if(e.length<8)return t;const n=ft(t.candidate),r=e[4]||"";if(n!=="host"||!r.endsWith(".local"))return t;const s=[...e];return s[4]="127.0.0.1",{...t,candidate:s.join(" ")}}class vs{peerId;sendRaw;onFileReceived;onProgress;onTransferCompleted;filesQueue=[];busy=!1;chunker=null;digester=null;lastProgress=0;constructor(e){this.peerId=e.peerId,this.sendRaw=e.sendRaw,this.onFileReceived=e.onFileReceived,this.onProgress=e.onProgress,this.onTransferCompleted=e.onTransferCompleted}sendFiles(e){const n=Array.isArray(e)?e:Array.from(e);for(const r of n)this.filesQueue.push(r);this.busy||this.dequeueFile()}async handleIncomingMessage(e){if(typeof e!="string"){await this.onChunkReceived(e);return}let n;try{n=JSON.parse(e)}catch(r){console.warn("[WebRTC] invalid transfer control message",{peerId:this.peerId,error:r});return}switch(console.log("[WebRTC] transfer message",{peerId:this.peerId,type:n.type}),n.type){case"header":this.onFileHeader(n);return;case"partition":this.onReceivedPartitionEnd(n.offset);return;case"partition-received":await this.sendNextPartition();return;case"progress":this.onDownloadProgress(n.progress);return;case"transfer-complete":await this.onTransferCompletedByPeer();return;default:return}}destroy(){this.filesQueue=[],this.busy=!1,this.chunker=null,this.digester?.abort(new Error("transfer destroyed")),this.digester=null,this.lastProgress=0}async dequeueFile(){const e=this.filesQueue.shift();if(!e){this.busy=!1;return}this.busy=!0,await this.sendFile(e)}async sendFile(e){this.sendJSON({type:"header",name:e.name,mime:e.type,size:e.size}),this.chunker=new ds(e,n=>this.sendRaw(n),n=>this.onPartitionEnd(n)),await this.chunker.nextPartition()}onPartitionEnd(e){this.sendJSON({type:"partition",offset:e})}onReceivedPartitionEnd(e){this.sendJSON({type:"partition-received",offset:e})}async sendNextPartition(){!this.chunker||this.chunker.isFileEnd||await this.chunker.nextPartition()}sendProgress(e){this.sendJSON({type:"progress",progress:e})}onDownloadProgress(e){this.onProgress?.(e)}onFileHeader(e){this.lastProgress=0,this.digester?.abort(new Error("new file header arrived before previous file completed")),this.digester=new hs({name:e.name,mime:e.mime,size:e.size}),this.digester.done.then(n=>{this.onFileReceived?.(n),this.sendJSON({type:"transfer-complete"})}).catch(n=>{console.error("[WebRTC] file digester failed",{peerId:this.peerId,error:n})})}async onChunkReceived(e){if(!this.digester){console.warn("[WebRTC] received chunk without file header",{peerId:this.peerId});return}const n=e instanceof Blob?await e.arrayBuffer():e;if(!n.byteLength)return;this.digester.unchunk(n);const r=this.digester.progress;this.onDownloadProgress(r),!(r-this.lastProgress<.01&&r<1)&&(this.lastProgress=r,this.sendProgress(r))}async onTransferCompletedByPeer(){this.onDownloadProgress(1),this.chunker=null,this.busy=!1,this.onTransferCompleted?.(),await this.dequeueFile()}sendJSON(e){this.sendRaw(JSON.stringify(e))}}class _s{#t=F("connecting");get connectionStatus(){return y(this.#t)}set connectionStatus(e){N(this.#t,e,!0)}#o=F("");get myId(){return y(this.#o)}set myId(e){N(this.#o,e,!0)}#e=F("");get myName(){return y(this.#e)}set myName(e){N(this.#e,e,!0)}signaling;#s=F(te([]));get peers(){return y(this.#s)}set peers(e){N(this.#s,e,!0)}#n=F(te(new Map));get peerConnections(){return y(this.#n)}set peerConnections(e){N(this.#n,e,!0)}#i=F(te({}));get peerConnectionState(){return y(this.#i)}set peerConnectionState(e){N(this.#i,e,!0)}#r=F(te({}));get peerSessionById(){return y(this.#r)}set peerSessionById(e){N(this.#r,e,!0)}constructor(e,n){this.myName=e,this.signaling=new as({info:{alias:e,deviceModel:n},onOpen:()=>{this.connectionStatus="connecting"},onMessage:r=>{this.handleSignalingMessage(r)},onClose:()=>{this.connectionStatus="disconnected",this.cleanupPeerConnections(),this.peers=[],this.peerConnectionState={},this.peerSessionById={}},onError:r=>{this.connectionStatus="disconnected",console.error("[Signaling] connection error",r)}})}handleSignalingMessage(e){switch(e.type){case"HELLO":this.myId=e.client.id,e.client.alias&&(this.myName=e.client.alias),this.peers=e.peers.filter(n=>n.id!==this.myId),this.connectionStatus="connected",this.peers.forEach(n=>{this.connectPeer(n.id)});return;case"JOIN":if(e.peer.id===this.myId)return;this.peers.some(n=>n.id===e.peer.id)||(this.peers=[...this.peers,e.peer]),this.connectPeer(e.peer.id);return;case"UPDATE":if(e.peer.id===this.myId){e.peer.alias&&(this.myName=e.peer.alias);return}this.peers=this.peers.some(n=>n.id===e.peer.id)?this.peers.map(n=>n.id===e.peer.id?e.peer:n):[...this.peers,e.peer];return;case"LEFT":{const n=this.peerConnections.get(e.peerId);n&&(n.destroy(),this.peerConnections.delete(e.peerId)),this.removePeerConnectionState(e.peerId),this.removePeerSession(e.peerId),this.peers=this.peers.filter(r=>r.id!==e.peerId);return}case"OFFER":this.handleIncomingOffer(e);return;case"ANSWER":this.handleIncomingAnswer(e);return;case"CANDIDATE":this.handleIncomingCandidate(e);return;case"ERROR":console.error("[Signaling] server error",e.code);return}}connectToPeer(e){if(!e||e===this.myId||this.peerConnections.get(e))return;const r=this.newSessionId(),s=this.constructPeer(e,r);s.isCaller=!0,this.peerConnections.set(e,s),this.setPeerSession(e,r),this.setPeerConnectionState(e,"not connected"),s.createPeerConnection()}sendFiles(e,n){const r=this.peerConnections.get(e);r&&r.sendFiles(n)}connectionLabel(e){return this.peerConnectionState[e]??"not connected"}isPeerConnected(e){return this.connectionLabel(e)==="connected"}handleIncomingOffer(e){const n=e.peer.id,r=e.sessionId,s=this.peerSessionById[n],i=this.peerConnections.get(n);if(i){if(s===r){i.HandlerOffer({type:"offer",sdp:e.sdp});return}i.destroy()}const c=this.constructPeer(n,r);c.isCaller=!1,this.peerConnections.set(n,c),this.setPeerSession(n,r),this.setPeerConnectionState(n,"not connected"),c.HandlerOffer({type:"offer",sdp:e.sdp})}handleIncomingAnswer(e){if(this.peerSessionById[e.peer.id]!==e.sessionId){console.warn("[WebRTC] ignoring answer for stale session",{peerId:e.peer.id,expected:this.peerSessionById[e.peer.id],received:e.sessionId});return}const n=this.peerConnections.get(e.peer.id);n&&n.HandleAnswer({type:"answer",sdp:e.sdp})}handleIncomingCandidate(e){if(this.peerSessionById[e.peer.id]!==e.sessionId){console.warn("[WebRTC] ignoring candidate for stale session",{peerId:e.peer.id,expected:this.peerSessionById[e.peer.id],received:e.sessionId});return}const n=this.peerConnections.get(e.peer.id);n&&n.HandleCandidate(e.candidate)}destroy(){this.cleanupPeerConnections(),this.signaling.destroy(),this.peers=[],this.peerConnectionState={},this.peerSessionById={},this.connectionStatus="disconnected"}cleanupPeerConnections(){this.peerConnections.forEach(e=>e.destroy()),this.peerConnections.clear()}connectPeer(e){this.myId&&e&&e!==this.myId&&this.myId<e&&this.connectToPeer(e)}constructPeer(e,n){const r=new ps({signaling:this.signaling,peerId:e,sessionId:n,forceLoopbackHostCandidates:this.signaling.getIceMode()==="none"&&gs(),onConnectionStateChange:s=>{const i=s==="connected"?"connected":"not connected";this.setPeerConnectionState(e,i)},onIceStateChange:(s,i)=>{s==="failed"&&console.warn("[WebRTC] ICE failed for peer",{peerId:e,sessionId:n,snapshot:i})}});return r.iceServers=this.signaling.getIceServers(),r}setPeerConnectionState(e,n){this.peerConnectionState={...this.peerConnectionState,[e]:n}}removePeerConnectionState(e){if(!(e in this.peerConnectionState))return;const n={...this.peerConnectionState};delete n[e],this.peerConnectionState=n}setPeerSession(e,n){this.peerSessionById={...this.peerSessionById,[e]:n}}removePeerSession(e){if(!(e in this.peerSessionById))return;const n={...this.peerSessionById};delete n[e],this.peerSessionById=n}newSessionId(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}}function gs(){const t=location.hostname;return t==="localhost"||t==="127.0.0.1"}const Wt=["Sky","Star","Moon","Fire","Dark","Ice","Neo","Shadow"],zt=["Walker","Hunter","Blade","Runner","Storm","Fang","Strike","Flame"];function ms(){const t=Wt[Math.floor(Math.random()*Wt.length)],e=zt[Math.floor(Math.random()*zt.length)];return`${t} ${e}`}function ys(t){const e=ws(t),n=Cs(t);return e&&n?`${n} | ${e}`:n||e}function ws(t){switch(!0){case t.includes("Firefox"):return"Firefox";case t.includes("Edg"):return"Edge";case(t.includes("Opera")||t.includes("OPR")):return"Opera";case t.includes("Chrome"):return"Chrome";case t.includes("Safari"):return"Safari";default:return"Unknown browser"}}function Cs(t){switch(!0){case(t.includes("iPhone")||t.includes("iPad")):return"iOS";case t.includes("Windows"):return"Windows";case t.includes("Android"):return"Android";case t.includes("Macintosh"):return"macOS";case(t.includes("Linux")||t.includes("X11")):return"Linux";default:return"Unknown device"}}var Is=Qe("<p>Waiting for peers to join...</p>"),bs=Qe('<li class="svelte-1n46o8q"><div class="svelte-1n46o8q"><strong> </strong> <span class="svelte-1n46o8q"> </span> <span class="svelte-1n46o8q"> </span></div> <div class="svelte-1n46o8q"><input type="file" multiple=""/></div></li>'),Ss=Qe('<ul class="svelte-1n46o8q"></ul>'),Es=Qe('<main class="svelte-1n46o8q"><h1 class="svelte-1n46o8q">FileSender</h1> <p> </p> <p class="debug svelte-1n46o8q"> </p> <h2 class="svelte-1n46o8q"> </h2> <h2 class="svelte-1n46o8q"> </h2> <!></main>');function Ts(t,e){Kt(e,!1);const n=ms(),r=ys(navigator.userAgent),s=new _s(n,r),i="server".toLowerCase(),c=`${location.protocol.startsWith("https")?"wss":"ws"}://${location.hostname}:9000/ws`;function o(E,O){const M=O.currentTarget;!M.files||M.files.length===0||(s.sendFiles(E,M.files),M.value="")}ss(()=>{s.destroy()}),ns();var a=Es(),l=se(V(a),2),d=V(l),u=se(l,2),h=V(u),p=se(u,2),f=V(p),v=se(p,2),m=V(v),S=se(v,2);{var C=E=>{var O=Is();$e(E,O)},j=E=>{var O=Ss();Zr(O,5,()=>s.peers,Qr,(M,T)=>{var J=bs(),qe=V(J),Ct=V(qe),kn=V(Ct),It=se(Ct,2),Pn=V(It),xn=se(It,2),On=V(xn),Fn=se(qe,2),bt=V(Fn);kt((Xe,Dn)=>{de(kn,y(T).alias||"Unnamed device"),de(Pn,y(T).deviceModel||y(T).deviceType||"Unknown device"),de(On,Xe),bt.disabled=Dn},[()=>s.connectionLabel(y(T).id),()=>!s.isPeerConnected(y(T).id)]),qr("change",bt,Xe=>o(y(T).id,Xe)),$e(M,J)}),$e(E,O)};Gr(S,E=>{s.peers.length===0?E(C):E(j,!1)})}kt(()=>{de(d,`Status: ${s.connectionStatus??""}`),de(h,`Debug: ICE=${i??""} | signaling=${c??""}`),de(f,`I am known as ${(s.myName||n)??""}`),de(m,`Peers (${s.peers.length??""})`)}),$e(t,a),Gt()}Jr(Ts,{target:document.getElementById("app")});
